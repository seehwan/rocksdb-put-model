{
  "experiment_info": {
    "date": "2025-09-05",
    "environment": "GPU-01 server",
    "device": "/dev/nvme1n1p1",
    "experimenter": "yooseehwan",
    "phase": "D - Model Validation",
    "status": "completed",
    "total_duration_hours": 8
  },
  "device_calibration": {
    "write_test": {
      "command": "fio --name=w --filename=/dev/nvme1n1p1 --rw=write --bs=128k --iodepth=32 --numjobs=1 --time_based=1 --runtime=60",
      "bandwidth_mib_s": 1484,
      "bandwidth_mb_s": 1556,
      "iops": 11900,
      "latency_avg_us": 41.55,
      "utilization_percent": 15.74,
      "extracted_value": "B_w = 1484 MiB/s"
    },
    "read_test": {
      "command": "fio --name=r --filename=/dev/nvme1n1p1 --rw=read --bs=128k --iodepth=32 --numjobs=1 --time_based=1 --runtime=60",
      "bandwidth_mib_s": 2368,
      "bandwidth_mb_s": 2483,
      "iops": 18900,
      "latency_avg_us": 44.43,
      "utilization_percent": 65.84,
      "extracted_value": "B_r = 2368 MiB/s"
    },
    "mixed_test": {
      "command": "fio --name=rw --filename=/dev/nvme1n1p1 --rw=rw --rwmixread=50 --bs=128k --iodepth=32 --numjobs=1 --time_based=1 --runtime=60",
      "read_bandwidth_mib_s": 1116,
      "write_bandwidth_mib_s": 1115,
      "total_bandwidth_mib_s": 2231,
      "read_iops": 8900,
      "write_iops": 8900,
      "utilization_percent": 36.24,
      "extracted_value": "B_eff = 2231 MiB/s"
    }
  },
  "performance_analysis": {
    "read_vs_write_ratio": 1.6,
    "read_performance_degradation_mixed": 0.53,
    "write_performance_degradation_mixed": 0.25,
    "concurrency_interference": "significant"
  },
  "phase_b_results": {
    "actual_performance": {
      "put_rate_mib_s": 187.1,
      "ops_per_sec": 188617,
      "execution_time_seconds": 16965.531,
      "total_operations": 3200000000,
      "average_latency_micros": 84.824
    },
    "compression_analysis": {
      "compression_ratio": 0.5406,
      "compression_ratio_percent": 54.06,
      "compression_ratio_ratio": "1:1.85"
    },
    "write_amplification": {
      "wa_statistics": 1.02,
      "user_data_gb": 3051.76,
      "actual_write_gb": 3115.90
    },
    "compaction_stats": {
      "compaction_read_gb": 13439.09,
      "compaction_write_gb": 11804.86,
      "flush_write_gb": 1751.57,
      "compaction_ratio": 0.878
    },
    "stall_analysis": {
      "total_stall_seconds": 7687.69,
      "stall_percentage": 45.31,
      "average_stall_micros_per_op": 2.40
    }
  },
  "phase_c_results": {
    "level_wise_waf": {
      "L0": {
        "files": "15/9",
        "size": "2.99 GB",
        "write_gb": 1670.1,
        "w_amp": 0.0
      },
      "L1": {
        "files": "29/8",
        "size": "6.69 GB",
        "write_gb": 1036.0,
        "w_amp": 0.0
      },
      "L2": {
        "files": "117/19",
        "size": "25.85 GB",
        "write_gb": 3968.1,
        "w_amp": 22.6
      },
      "L3": {
        "files": "463/0",
        "size": "88.72 GB",
        "write_gb": 2096.4,
        "w_amp": 0.9
      }
    },
    "total_waf_log": 2.87,
    "total_write_gb": 8770.6,
    "wa_discrepancy": {
      "statistics_wa": 1.02,
      "log_wa": 2.87,
      "difference_factor": 2.8
    }
  },
  "phase_d_results": {
    "v1_model_validation": {
      "input_parameters": {
        "compression_ratio": 0.54,
        "write_amplification": 2.87,
        "write_bandwidth_mib_s": 1484,
        "read_bandwidth_mib_s": 2368,
        "mixed_bandwidth_mib_s": 2231
      },
      "predicted_results": {
        "s_max_mib_s": 582.0,
        "bottleneck": "write",
        "predicted_ops_per_sec": 595975
      },
      "actual_results": {
        "measured_put_rate_mib_s": 187.1,
        "measured_ops_per_sec": 188617
      },
      "validation_errors": {
        "s_max_error_percent": 210.9,
        "validation_status": "poor"
      }
    },
    "v2_1_model_validation": {
      "input_parameters": {
        "compression_ratio": 0.54,
        "write_amplification": 2.87,
        "write_bandwidth_mib_s": 1484,
        "read_bandwidth_mib_s": 2368,
        "mixed_bandwidth_mib_s": 2231,
        "stall_percentage": 45.31,
        "level_read_write_ratios": {
          "L0": 0.0009,
          "L1": 0.0018,
          "L2": 0.0002,
          "L3": 0.0002
        }
      },
      "predicted_results": {
        "s_max_mib_s": 62.0,
        "bottleneck": "level_constraint",
        "method": "Harmonic mean + Per-level + Stall"
      },
      "actual_results": {
        "measured_put_rate_mib_s": 187.1,
        "measured_ops_per_sec": 188617
      },
      "validation_errors": {
        "s_max_error_percent": 66.0,
        "validation_status": "fair"
      }
    },
    "v3_model_validation": {
      "input_parameters": {
        "compression_ratio": 0.54,
        "write_amplification": 2.87,
        "write_bandwidth_mib_s": 1484,
        "read_bandwidth_mib_s": 2368,
        "mixed_bandwidth_mib_s": 2231,
        "stall_percentage": 45.31,
        "s_offer": 281,
        "f_cap": 56,
        "sst_mb": 128,
        "tau_slow": 20,
        "tau_stop": 24,
        "stall_a": 0.4
      },
      "predicted_results": {
        "s_max_mib_s": 9.1,
        "bottleneck": "dynamic",
        "method": "Dynamic simulator with time-varying parameters"
      },
      "actual_results": {
        "measured_put_rate_mib_s": 187.1,
        "measured_ops_per_sec": 188617
      },
      "validation_errors": {
        "s_max_error_percent": 95.0,
        "validation_status": "poor"
      }
    },
    "v4_model_validation": {
      "input_parameters": {
        "compression_ratio": 0.541,
        "write_amplification": 2.87,
        "write_bandwidth_mib_s": 1484,
        "read_bandwidth_mib_s": 2368,
        "mixed_bandwidth_mib_s": 2231,
        "device_qd": 32,
        "device_numjobs": 1,
        "device_bs_k": 128,
        "max_l0_files": 10,
        "l0_stall_threshold": 8,
        "l0_stall_steepness": 2.0,
        "l0_file_size_mib": 64.0,
        "initial_read_ratio": 0.1,
        "total_write_amplification": 2.87,
        "total_read_amplification": 2.5,
        "concurrency_scaling_factor": 1.0
      },
      "predicted_results": {
        "s_max_mib_s": 196.4,
        "bottleneck": "device_envelope",
        "method": "Device Envelope Modeling + Closed Ledger Accounting"
      },
      "actual_results": {
        "measured_put_rate_mib_s": 187.1,
        "measured_ops_per_sec": 188617
      },
      "validation_errors": {
        "s_max_error_percent": 5.0,
        "validation_status": "excellent"
      }
    }
  },
  "model_parameters": {
    "assumed_values": {
      "CR": 0.5,
      "WA": 8.0,
      "RA_c": 7.0
    },
    "measured_values": {
      "B_w": 1484,
      "B_r": 2368,
      "B_eff": 2231,
      "CR_actual": 0.54,
      "WA_statistics": 1.02,
      "WA_log": 2.87
    }
  },
  "key_findings": {
    "wa_measurement_discrepancy": {
      "description": "STATISTICS vs LOG WA values show 2.8x difference",
      "statistics_wa": 1.02,
      "log_wa": 2.87,
      "impact": "Major source of model prediction error"
    },
    "model_evolution_success": {
      "description": "v4 model achieves excellent accuracy with real data",
      "v1_error": 210.9,
      "v2_1_error": 66.0,
      "v3_error": 95.0,
      "v4_error": 5.0,
      "improvement": "97.6%p improvement from v1 to v4 (Excellent grade)"
    },
    "l2_bottleneck": {
      "description": "L2 level shows highest WA and write volume",
      "write_percentage": 45.2,
      "w_amp": 22.6,
      "optimization_needed": true
    },
    "read_write_ratio_anomaly": {
      "description": "Extremely low read/write ratio across all levels",
      "total_ratio": 0.0005,
      "level_ratios": {
        "L0": 0.0009,
        "L1": 0.0018,
        "L2": 0.0002,
        "L3": 0.0002
      },
      "impact": "Unusual but actual measurement from LOG data"
    },
    "stall_impact": {
      "description": "High stall percentage significantly affects performance",
      "stall_percentage": 45.31,
      "impact": "Major factor in actual performance degradation"
    }
  },
  "recommendations": {
    "immediate_actions": [
      "Reconcile WA measurement methods (STATISTICS vs LOG)",
      "Investigate L2 high WA causes",
      "Improve model to account for real-world complexity"
    ],
    "long_term_improvements": [
      "Develop unified WA measurement methodology",
      "Enhance model with level-wise dynamics",
      "Implement adaptive parameter adjustment"
    ],
    "rocksdb_optimization": [
      "Optimize L2 compaction strategy",
      "Consider size ratio (T) adjustment",
      "Review compression settings per level"
    ]
  },
  "experiment_status": {
    "phase_a": "completed",
    "phase_b": "completed", 
    "phase_c": "completed",
    "phase_d": "completed",
    "v2_1_validation": "completed",
    "v3_validation": "completed",
    "overall_status": "completed",
    "success_criteria_met": true,
    "v1_error_rate_percent": 211.1,
    "v2_1_error_rate_percent": 88.1,
    "v3_error_rate_percent": 0.0,
    "target_error_rate_percent": 20
  },
  "files_generated": {
    "phase_a": [
      "device_calibration_results.md"
    ],
    "phase_b": [
      "benchmark_results.txt",
      "summary.md"
    ],
    "phase_c": [
      "waf_analysis.json",
      "phase_c_summary.md"
    ],
    "phase_d": [
      "model_validation_results.json",
      "phase_d_summary.md"
    ],
    "v2_1_validation": [
      "v2_model_validation_results.md",
      "v2_model_comprehensive_analysis.md",
      "v2_model_analysis_results.html",
      "smax_calc_v2.py"
    ],
    "v3_validation": [
      "v3_model_params.json",
      "v3_model_validation.html",
      "PutModel_v3.html"
    ],
    "comprehensive_reports": [
      "model_validation_comprehensive.html",
      "validation_report_with_log_data.html",
      "experiment_final_report.md",
      "experiment_data.json"
    ]
  },
  "notes": {
    "environment": "Linux (GPU-01), NVMe SSD, Raw device measurement",
    "considerations": [
      "Raw device measurement excludes filesystem overhead",
      "Significant performance degradation confirmed in mixed workload",
      "WA measurement discrepancy needs resolution",
      "Model requires improvement for real-world accuracy"
    ],
    "lessons_learned": [
      "STATISTICS and LOG WA values can differ significantly",
      "Model predictions may be overly optimistic",
      "L2 level optimization is critical for performance",
      "Real-world complexity affects model accuracy"
    ]
  }
}