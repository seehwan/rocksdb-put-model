# Phase-C: Per-Level WAF 분석 결과

**실행 일시**: 2025-09-05  
**분석 대상**: /rocksdb/data/LOG  
**사용자 데이터**: 3,051.76 GB  

## 📊 Level별 WAF 분석 결과

### Level별 상세 데이터

| Level | Files | Size | Write (GB) | W-Amp | 비고 |
|-------|-------|------|------------|-------|------|
| **L0** | 15/9 | 2.99 GB | 1,670.1 | 0.0 | Flush only |
| **L1** | 29/8 | 6.69 GB | 1,036.0 | 0.0 | Low WA |
| **L2** | 117/19 | 25.85 GB | 3,968.1 | 22.6 | **주요 병목** |
| **L3** | 463/0 | 88.72 GB | 2,096.4 | 0.9 | Medium WA |

### 총합 통계

- **총 Write**: 8,770.6 GB
- **사용자 데이터**: 3,051.76 GB
- **총 WA**: **2.87**

## 🔍 주요 발견사항

### 1. WA 측정 방법의 차이

| 측정 방법 | WA 값 | 차이 |
|-----------|-------|------|
| **Phase-B (STATISTICS)** | 1.02 | - |
| **Phase-C (LOG)** | 2.87 | **+181%** |

### 2. Level별 특성

- **L0-L1**: 매우 낮은 WA (0.0) - 거의 1:1 비율
- **L2**: 높은 WA (22.6) - 주요 병목 지점
- **L3**: 중간 수준 WA (0.9)

### 3. I/O 분포

- **L2가 45.2%** 차지 (3,968.1 / 8,770.6 GB)
- **L0이 19.0%** 차지 (1,670.1 / 8,770.6 GB)
- **L1이 11.8%** 차지 (1,036.0 / 8,770.6 GB)
- **L3이 23.9%** 차지 (2,096.4 / 8,770.6 GB)

## ⚠️ Phase-B와의 불일치 분석

### 원인 분석

1. **측정 시점의 차이**:
   - Phase-B: 전체 4.7시간 실행 기간의 평균
   - Phase-C: 특정 시점의 스냅샷

2. **측정 방법의 차이**:
   - Phase-B: `rocksdb.stats` 델타 기반
   - Phase-C: LOG 파일의 Compaction Stats

3. **데이터 범위의 차이**:
   - Phase-B: 전체 시스템 통계
   - Phase-C: Compaction만의 통계

### 권장사항

1. **WA 측정 방법 통일**: STATISTICS vs LOG 일치성 검토
2. **시간대별 분석**: 실행 기간 중 WA 변화 추이 분석
3. **Level별 상세 분석**: L2의 높은 WA 원인 파악

## 📈 모델 검증 결과

### S_max 계산 (Phase-C 데이터 기반)

```
입력 파라미터:
- CR: 0.54
- WA: 2.87
- B_w: 1484 MiB/s
- B_r: 2368 MiB/s
- B_eff: 2231 MiB/s

계산 결과:
- S_max: 582.0 MiB/s
- 병목: Write bound
- 예상 ops/s: 595,975
```

### 예측 vs 실제 비교

| 항목 | 예측값 | 실제값 | 오류율 |
|------|--------|--------|--------|
| **S_max** | 582.0 MiB/s | 187.1 MiB/s | **-67.8%** |
| **WA** | 2.87 | 1.02 (Phase-B) | **-64.4%** |

## 🎯 다음 단계

### Phase-D: 모델 검증 완료
- [x] S_max 계산 및 비교
- [x] 오류율 분석
- [x] 병목 지점 식별

### 추가 분석 필요사항
- [ ] WA 측정 방법 일치성 검토
- [ ] 시간대별 WA 변화 분석
- [ ] L2 높은 WA 원인 분석

## 📁 생성된 파일

- `waf_analysis.json`: Level별 WAF 데이터 (JSON)
- `phase_c_summary.md`: 이 요약 보고서

---

**완료일**: 2025-09-05  
**상태**: ✅ 완료  
**다음 단계**: Phase-E (민감도 분석) 또는 추가 분석
