<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase-C Final 보고서 - WAF 분석 및 Put Model 파라미터 추출</title>
    <link rel="stylesheet" href="../../../styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .metric-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #007bff;
            margin: 10px 0;
        }
        .metric-unit {
            color: #6c757d;
            font-size: 0.9em;
        }
        .performance-chart {
            margin: 20px 0;
            text-align: center;
        }
        .performance-chart img {
            max-width: 100%;
            height: auto;
            border: 1px solid #dee2e6;
            border-radius: 8px;
        }
        .waf-highlight {
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
        }
        .benchmark-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .benchmark-card {
            background: #fff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
        }
        .benchmark-card.fillrandom {
            border-left: 4px solid #007bff;
        }
        .benchmark-card.readrandomwriterandom {
            border-left: 4px solid #28a745;
        }
        .benchmark-card.overwrite {
            border-left: 4px solid #ffc107;
        }
        .benchmark-card.mixgraph {
            border-left: 4px solid #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Phase-C Final 보고서</h1>
            <div class="subtitle">WAF 분석 및 Put Model 파라미터 추출</div>
            <div class="date">2025-09-11 | Phase-B 통계 분석 완료</div>
        </div>

        <!-- Executive Summary -->
        <div class="section">
            <h2>🎯 Executive Summary</h2>
            <div class="highlight-box success">
                <h3>✅ Phase-C WAF 분석 완료</h3>
                <div class="metric-grid">
                    <div class="metric-card">
                        <h4>분석된 벤치마크</h4>
                        <div class="metric-value">4개</div>
                        <div class="metric-unit">모든 Phase-B 벤치마크</div>
                    </div>
                    <div class="metric-card">
                        <h4>핵심 WAF</h4>
                        <div class="metric-value">2.39</div>
                        <div class="metric-unit">FillRandom (Put Model 검증용)</div>
                    </div>
                    <div class="metric-card">
                        <h4>사용자 데이터</h4>
                        <div class="metric-value">953.67</div>
                        <div class="metric-unit">GB (10억 키)</div>
                    </div>
                    <div class="metric-card">
                        <h4>총 Flush</h4>
                        <div class="metric-value">2,280.32</div>
                        <div class="metric-unit">GB (FillRandom)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 핵심 발견사항 -->
        <div class="section">
            <h2>🔍 핵심 발견사항</h2>
            
            <div class="waf-highlight">
                <h3>🎯 Put Model 검증을 위한 핵심 데이터</h3>
                <p><strong>FillRandom WAF: 2.39</strong> - 이는 Put Model의 Write Amplification Factor 예측과 비교할 수 있는 중요한 실제 측정값입니다.</p>
                <ul>
                    <li><strong>사용자 데이터:</strong> 953.67 GB (10억 키 × 1KB)</li>
                    <li><strong>실제 Flush:</strong> 2,280.32 GB</li>
                    <li><strong>WAF 계산:</strong> 2,280.32 GB ÷ 953.67 GB = 2.39</li>
                    <li><strong>의미:</strong> 사용자가 1GB를 쓰면 실제로는 2.39GB가 디스크에 기록됨</li>
                </ul>
            </div>
        </div>

        <!-- 벤치마크별 WAF 분석 -->
        <div class="section">
            <h2>📊 벤치마크별 WAF 분석</h2>
            
            <div class="performance-chart">
                <h3>종합 WAF 분석</h3>
                <img src="phase_c_results/comprehensive_waf_analysis.png" alt="종합 WAF 분석">
                <p><em>벤치마크별 WAF, Flush bytes, 상관관계 및 요약</em></p>
            </div>

            <div class="benchmark-comparison">
                <div class="benchmark-card fillrandom">
                    <h4>FillRandom</h4>
                    <div class="metric-value" style="color: #007bff;">2.39</div>
                    <div class="metric-unit">WAF</div>
                    <p><strong>특징:</strong> 순수 쓰기 워크로드</p>
                    <p><strong>Flush:</strong> 2,280.32 GB</p>
                    <p><strong>DB Writes:</strong> 40억 번</p>
                    <p><strong>Compaction:</strong> 99시간</p>
                    <p><strong>의미:</strong> Put Model 검증의 핵심 데이터</p>
                </div>

                <div class="benchmark-card readrandomwriterandom">
                    <h4>ReadRandomWriteRandom</h4>
                    <div class="metric-value" style="color: #28a745;">0.03</div>
                    <div class="metric-unit">WAF</div>
                    <p><strong>특징:</strong> 읽기 중심 혼합 워크로드</p>
                    <p><strong>Flush:</strong> 26.27 GB</p>
                    <p><strong>DB Writes:</strong> 4,613만 번</p>
                    <p><strong>Compaction:</strong> 39분</p>
                    <p><strong>의미:</strong> 읽기 중심으로 WAF 낮음</p>
                </div>

                <div class="benchmark-card overwrite">
                    <h4>Overwrite</h4>
                    <div class="metric-value" style="color: #ffc107;">0.08</div>
                    <div class="metric-unit">WAF</div>
                    <p><strong>특징:</strong> 덮어쓰기 워크로드</p>
                    <p><strong>Flush:</strong> 76.98 GB</p>
                    <p><strong>DB Writes:</strong> 1.35억 번</p>
                    <p><strong>Compaction:</strong> 82분</p>
                    <p><strong>의미:</strong> 덮어쓰기 특성상 WAF 낮음</p>
                </div>

                <div class="benchmark-card mixgraph">
                    <h4>MixGraph</h4>
                    <div class="metric-value" style="color: #dc3545;">0.00</div>
                    <div class="metric-unit">WAF</div>
                    <p><strong>특징:</strong> 읽기 전용 워크로드</p>
                    <p><strong>Flush:</strong> 0.00 GB</p>
                    <p><strong>DB Writes:</strong> 0번</p>
                    <p><strong>Gets:</strong> 50억 번</p>
                    <p><strong>의미:</strong> 순수 읽기로 WAF 없음</p>
                </div>
            </div>
        </div>

        <!-- Put Model 파라미터 -->
        <div class="section">
            <h2>🔧 Put Model 파라미터 추출</h2>
            
            <div class="highlight">
                <h3>Phase-D 모델 검증을 위한 핵심 파라미터</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                    <thead>
                        <tr style="background: #f8f9fa;">
                            <th style="border: 1px solid #dee2e6; padding: 12px;">파라미터</th>
                            <th style="border: 1px solid #dee2e6; padding: 12px;">값</th>
                            <th style="border: 1px solid #dee2e6; padding: 12px;">출처</th>
                            <th style="border: 1px solid #dee2e6; padding: 12px;">의미</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>Write Amplification Factor (WA)</strong></td>
                            <td style="border: 1px solid #dee2e6; padding: 12px; font-weight: bold; color: #007bff;">2.39</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">FillRandom 통계</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">실제 측정된 WAF</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>Compression Ratio (CR)</strong></td>
                            <td style="border: 1px solid #dee2e6; padding: 12px; font-weight: bold; color: #28a745;">~0.5</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">LZ4 압축 (추정)</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">압축률 (추정값)</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>User Data Size</strong></td>
                            <td style="border: 1px solid #dee2e6; padding: 12px; font-weight: bold; color: #6c757d;">953.67 GB</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">10억 키 × 1KB</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">실제 사용자 데이터</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>Flush Data Size</strong></td>
                            <td style="border: 1px solid #dee2e6; padding: 12px; font-weight: bold; color: #dc3545;">2,280.32 GB</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">rocksdb.flush.write.bytes</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">실제 디스크 쓰기</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #dee2e6; padding: 12px;"><strong>Compaction Time</strong></td>
                            <td style="border: 1px solid #dee2e6; padding: 12px; font-weight: bold; color: #ffc107;">99시간</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">rocksdb.compaction.total.time</td>
                            <td style="border: 1px solid #dee2e6; padding: 12px;">총 Compaction 시간</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 기술적 분석 -->
        <div class="section">
            <h2>🔬 기술적 분석</h2>
            
            <h3>WAF 계산 방법론</h3>
            <div class="highlight">
                <p><strong>WAF = 실제 디스크 쓰기 / 사용자 데이터</strong></p>
                <p>WAF = 2,280.32 GB ÷ 953.67 GB = 2.39</p>
                <p>이는 LSM-tree의 특성상 발생하는 Write Amplification을 정확히 반영합니다.</p>
            </div>

            <h3>벤치마크별 특성 분석</h3>
            <div class="highlight">
                <ul>
                    <li><strong>FillRandom (WAF 2.39):</strong> 순수 쓰기 워크로드로 LSM-tree의 모든 레벨에서 Compaction이 발생하여 높은 WAF</li>
                    <li><strong>ReadRandomWriteRandom (WAF 0.03):</strong> 읽기 중심으로 쓰기가 적어 WAF가 매우 낮음</li>
                    <li><strong>Overwrite (WAF 0.08):</strong> 덮어쓰기 특성상 기존 데이터를 덮어써서 WAF가 낮음</li>
                    <li><strong>MixGraph (WAF 0.00):</strong> 순수 읽기 워크로드로 쓰기가 없어 WAF가 0</li>
                </ul>
            </div>
        </div>

        <!-- 다음 단계 -->
        <div class="section">
            <h2>🎯 다음 단계: Phase-D</h2>
            
            <div class="highlight-box success">
                <h3>✅ Phase-D 준비 완료</h3>
                <p>Phase-C에서 추출한 핵심 파라미터를 바탕으로 Put Model 검증을 진행할 수 있습니다:</p>
                
                <h4>Phase-D에서 수행할 작업:</h4>
                <ul>
                    <li><strong>v1 모델 검증:</strong> WAF 2.39와 예측값 비교</li>
                    <li><strong>v2.1 모델 검증:</strong> 개선된 모델의 정확도 평가</li>
                    <li><strong>v3/v4 모델 검증:</strong> 동적 시뮬레이터와 실제 데이터 비교</li>
                    <li><strong>오류율 계산:</strong> |실측값 - 예측값| / 예측값 × 100%</li>
                </ul>
                
                <h4>핵심 검증 지표:</h4>
                <ul>
                    <li><strong>목표 오류율:</strong> ±10-15% 이내</li>
                    <li><strong>기준 데이터:</strong> FillRandom WAF 2.39</li>
                    <li><strong>압축률:</strong> LZ4 기준 ~0.5 (추정)</li>
                </ul>
            </div>
        </div>

        <!-- 결과 파일 -->
        <div class="section">
            <h2>📁 생성된 결과 파일</h2>
            
            <div class="highlight">
                <h3>분석 결과 파일들</h3>
                <ul>
                    <li><strong>phase_c_comprehensive_analysis.json</strong> - 종합 분석 결과 (JSON)</li>
                    <li><strong>waf_analysis.csv</strong> - WAF 분석 데이터 (CSV)</li>
                    <li><strong>comprehensive_waf_analysis.png</strong> - 종합 WAF 시각화</li>
                </ul>
            </div>
        </div>

        <!-- 결론 -->
        <div class="section">
            <h2>📋 결론</h2>
            
            <div class="highlight-box success">
                <h3>✅ Phase-C 성공적 완료</h3>
                <p>Phase-B의 대규모 실험 결과를 분석하여 Put Model 검증에 필요한 핵심 파라미터를 성공적으로 추출했습니다.</p>
                
                <h4>주요 성과:</h4>
                <ul>
                    <li>✅ <strong>FillRandom WAF 2.39</strong> - Put Model 검증의 핵심 데이터 확보</li>
                    <li>✅ <strong>4개 벤치마크</strong> - 다양한 워크로드 특성 분석</li>
                    <li>✅ <strong>실제 측정 데이터</strong> - 이론적 모델과 비교 가능한 정확한 수치</li>
                    <li>✅ <strong>Phase-D 준비</strong> - 모델 검증을 위한 모든 파라미터 확보</li>
                </ul>
                
                <p><strong>다음 단계:</strong> Phase-D에서 v1, v2.1, v3, v4 모델의 예측 정확도를 WAF 2.39와 비교하여 검증합니다.</p>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>RocksDB Put Model 검증 프로젝트 | Phase-C Final 보고서</p>
            <p>생성일: 2025-09-11 | 분석 대상: Phase-B 실험 결과</p>
        </div>
    </div>
</body>
</html>
