<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase-A: Device Envelope 모델 구축</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        .achievement-card, .contribution-card {
            border-left-color: #e74c3c !important;
        }
        .header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%) !important;
        }
        h1 {
            color: #e74c3c !important;
            border-bottom-color: #e74c3c !important;
        }
        h2 {
            border-left-color: #e74c3c !important;
        }
        .link-card {
            border-left-color: #e74c3c !important;
        }
        .section-header {
            background: #e74c3c !important;
        }
        .footer {
            border-top-color: #e74c3c !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔧 Phase-A: Device Envelope 모델 구축</h1>
            <div class="subtitle">
                초기상태 장치 성능과 Phase-B 이후 열화된 상태에서의 장치 성능을 측정하여 Device Envelope 모델 구축
            </div>
        </div>

        <h2>📊 실험 설계</h2>
        
        <div class="contribution-grid">
            <div class="contribution-card">
                <h3>1. 초기상태 장치 성능 측정</h3>
                <h5>1.1 SSD 완전 초기화</h5>
                <p><strong>목적</strong>: 기존 파티션 구조를 완전히 제거하고 전체 장치를 하나의 파티션으로 사용하여 정확한 성능 측정을 수행합니다.</p>
                <p><strong>기존 파티션 구조</strong>:</p>
                <ul>
                    <li><code>nvme1n1p1</code>: WAL (Write-Ahead Log) 전용 파티션</li>
                    <li><code>nvme1n1p2</code>: Data 전용 파티션</li>
                </ul>
                <p><strong>새로운 구조</strong>: <code>nvme1n1</code>: 전체 장치를 하나의 파티션으로 사용</p>
                <ul>
                    <li><strong>기존 파티션 언마운트</strong>: 
                        <ul>
                            <li><code>sudo umount /dev/nvme1n1p1</code> (WAL 파티션)</li>
                            <li><code>sudo umount /dev/nvme1n1p2</code> (Data 파티션)</li>
                            <li><code>sudo umount /dev/nvme1n1</code> (전체 장치)</li>
                        </ul>
                    </li>
                    <li><strong>파티션 테이블 삭제</strong>: <code>sudo parted /dev/nvme1n1 mklabel gpt</code></li>
                    <li><strong>블록 디스카드</strong>: <code>sudo blkdiscard /dev/nvme1n1</code></li>
                    <li><strong>파일시스템 재생성</strong>: <code>sudo mkfs.f2fs /dev/nvme1n1</code></li>
                    <li><strong>마운트</strong>: <code>sudo mount /dev/nvme1n1 /rocksdb</code></li>
                </ul>
                <h5>1.2 초기 장치 성능 측정</h5>
                <ul>
                    <li><strong>fio 벤치마크</strong>: 4K 블록 크기, 16개 작업</li>
                    <li><strong>쓰기 성능</strong>: 순차 쓰기, 랜덤 쓰기</li>
                    <li><strong>읽기 성능</strong>: 순차 읽기, 랜덤 읽기</li>
                    <li><strong>지연시간</strong>: 평균, 95%, 99% 지연시간</li>
                </ul>
                <h5>1.3 Device Envelope 기준선 설정</h5>
                <ul>
                    <li><strong>4D Grid Interpolation</strong>: (ρ_r, qd, numjobs, bs_k)</li>
                    <li><strong>364개 측정점</strong>: fio 벤치마크 기반</li>
                    <li><strong>초기 성능 프로파일</strong>: 최적 성능 상태 기록</li>
                </ul>
            </div>
            <div class="contribution-card">
                <h3>2. Phase-B 이후 열화상태 장치 성능 측정</h3>
                <h5>2.1 Phase-B 완료 후 측정</h5>
                <ul>
                    <li><strong>Phase-B 실험 완료 대기</strong>: FillRandom 실험 완료 후</li>
                    <li><strong>동일한 fio 벤치마크</strong>: 초기 측정과 동일한 조건</li>
                    <li><strong>열화된 성능 프로파일</strong>: 사용 후 성능 상태 기록</li>
                </ul>
                <h5>2.2 성능 열화 분석</h5>
                <ul>
                    <li><strong>성능 저하율</strong>: 초기 대비 성능 저하 비율</li>
                    <li><strong>열화 패턴</strong>: 시간에 따른 성능 변화 패턴</li>
                    <li><strong>열화 원인</strong>: 쓰기 마모, 컨트롤러 최적화 등</li>
                </ul>
            </div>
            <div class="contribution-card">
                <h3>3. Device Envelope 모델 구축</h3>
                <h5>3.1 시간 의존적 성능 모델</h5>
                <ul>
                    <li><strong>초기 성능</strong>: 최고 성능 상태 모델</li>
                    <li><strong>열화 성능</strong>: 사용 후 성능 상태 모델</li>
                    <li><strong>시간 의존성</strong>: 실험 진행에 따른 성능 변화 모델</li>
                </ul>
                <h5>3.2 4D Grid Interpolation 확장</h5>
                <ul>
                    <li><strong>시간 차원 추가</strong>: 5D Grid Interpolation (시간 포함)</li>
                    <li><strong>동적 보간</strong>: 시간에 따른 성능 변화 보간</li>
                    <li><strong>예측 모델</strong>: 미래 성능 예측 가능</li>
                </ul>
            </div>
        </div>

        <h2>🔧 실험 환경</h2>
        
        <h3>하드웨어</h3>
        <table>
            <thead>
                <tr>
                    <th>구성 요소</th>
                    <th>사양</th>
                    <th>비고</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>CPU</td>
                    <td>Intel i9-12900K (16 cores, 24 threads)</td>
                    <td>고성능 멀티코어</td>
                </tr>
                <tr>
                    <td>Memory</td>
                    <td>64GB DDR4-3200</td>
                    <td>대용량 메모리</td>
                </tr>
                <tr>
                    <td>Storage</td>
                    <td>Samsung 980 PRO 2TB NVMe SSD</td>
                    <td>고성능 NVMe</td>
                </tr>
                <tr>
                    <td>OS</td>
                    <td>Ubuntu 22.04 LTS</td>
                    <td>안정적 리눅스</td>
                </tr>
            </tbody>
        </table>

        <h3>소프트웨어</h3>
        <ul>
            <li><strong>fio</strong>: Flexible I/O Tester (버전 3.28+)</li>
            <li><strong>Python</strong>: 3.8+ (numpy, pandas, scipy)</li>
            <li><strong>기타</strong>: 시스템 모니터링 도구</li>
        </ul>

        <h2>📋 실험 절차</h2>
        
        <div class="link-grid">
            <div class="link-card">
                <div class="step-number">1</div>
                <h3>SSD 초기화</h3>
                <p>완전한 SSD 초기화</p>
            </div>
            <div class="link-card">
                <div class="step-number">2</div>
                <h3>초기 성능 측정</h3>
                <p>fio 그리드 벤치마크</p>
            </div>
            <div class="link-card">
                <div class="step-number">3</div>
                <h3>Phase-B 대기</h3>
                <p>FillRandom 실험 진행</p>
            </div>
            <div class="link-card">
                <div class="step-number">4</div>
                <h3>열화 성능 측정</h3>
                <p>동일한 fio 벤치마크</p>
            </div>
            <div class="link-card">
                <div class="step-number">5</div>
                <h3>모델 구축</h3>
                <p>Device Envelope 모델</p>
            </div>
        </div>

        <h3>상세 절차</h3>
        
        <div class="highlight-box">
            <h3>1. SSD 완전 초기화</h3>
            <div class="code-block">
# 1. 기존 파티션 언마운트
sudo umount /dev/nvme1n1p1  # WAL 파티션
sudo umount /dev/nvme1n1p2  # Data 파티션
sudo umount /dev/nvme1n1    # 전체 장치

# 2. 파티션 테이블 삭제
sudo parted /dev/nvme1n1 mklabel gpt

# 3. 블록 디스카드 (완전 초기화)
sudo blkdiscard /dev/nvme1n1

# 4. 파일시스템 재생성
sudo mkfs.f2fs /dev/nvme1n1

# 5. 마운트
sudo mount /dev/nvme1n1 /rocksdb

# 6. 권한 설정
sudo chown -R $USER:$USER /rocksdb
            </div>
        </div>

        <div class="highlight-box">
            <h3>2. 초기 상태 fio 벤치마크</h3>
            <div class="code-block">
# fio 그리드 벤치마크 실행
python3 scripts/run_phase_a.py

# 측정 파라미터:
# - 블록 크기: 4K, 8K, 16K, 32K, 64K, 128K, 256K, 512K, 1M
# - 큐 깊이: 1, 2, 4, 8, 16, 32, 64
# - 작업 수: 1, 2, 4, 8, 16
# - 읽기/쓰기 비율: 0.0, 0.25, 0.5, 0.75, 1.0
            </div>
        </div>

        <div class="highlight-box">
            <h3>3. Phase-B 실험 진행</h3>
            <div class="code-block">
# Phase-B FillRandom 실험 실행
python3 scripts/run_phase_b.py

# 실험 내용:
# - Uniform Random 분포 FillRandom
# - Zipfian Random 분포 FillRandom
# - 상세한 로그 수집
# - 성능 모니터링
            </div>
        </div>

        <div class="highlight-box">
            <h3>4. 열화 상태 fio 벤치마크</h3>
            <div class="code-block">
# Phase-B 완료 후 동일한 fio 벤치마크 실행
python3 scripts/run_phase_a.py

# 초기 측정과 동일한 조건으로 재측정
# - 동일한 측정점 (364개)
# - 동일한 테스트 시간 (5분 + 1분 워밍업)
# - 열화된 성능 프로파일 기록
            </div>
        </div>

        <div class="highlight-box">
            <h3>5. Device Envelope 모델 구축</h3>
            <div class="code-block">
# 4D Grid Interpolation 모델 생성
# - 초기 상태 성능 그리드
# - 열화 상태 성능 그리드
# - 시간 의존적 보간 모델

# 열화 분석
# - 성능 저하율 계산
# - 열화 패턴 분석
# - 예측 모델 구축
            </div>
        </div>

        <h2>📊 측정 파라미터</h2>
        
        <h3>fio 벤치마크 설정</h3>
        <table>
            <thead>
                <tr>
                    <th>파라미터</th>
                    <th>값</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>블록 크기</td>
                    <td>4K, 8K, 16K, 32K, 64K, 128K, 256K, 512K, 1M</td>
                    <td>9개 크기</td>
                </tr>
                <tr>
                    <td>큐 깊이</td>
                    <td>1, 2, 4, 8, 16, 32, 64</td>
                    <td>7개 깊이</td>
                </tr>
                <tr>
                    <td>작업 수</td>
                    <td>1, 2, 4, 8, 16</td>
                    <td>5개 작업</td>
                </tr>
                <tr>
                    <td>읽기/쓰기 비율</td>
                    <td>0.0, 0.25, 0.5, 0.75, 1.0</td>
                    <td>5개 비율</td>
                </tr>
                <tr>
                    <td>총 측정점</td>
                    <td>364개</td>
                    <td>9×7×5×5 = 1575개 중 중복 제거</td>
                </tr>
                <tr>
                    <td>테스트 시간</td>
                    <td>5분 + 1분 워밍업</td>
                    <td>각 측정점당</td>
                </tr>
            </tbody>
        </table>

        <h2>📈 예상 결과</h2>
        
        <div class="contribution-grid">
            <div class="contribution-card">
                <h3>1. 초기 상태 성능</h3>
                <ul>
                    <li><strong>최고 성능</strong>: 초기화 직후 최적 성능</li>
                    <li><strong>성능 프로파일</strong>: 4D 그리드 기반 성능 맵</li>
                    <li><strong>기준선</strong>: 모든 후속 측정의 기준</li>
                </ul>
            </div>
            <div class="contribution-card">
                <h3>2. 열화 상태 성능</h3>
                <ul>
                    <li><strong>성능 저하</strong>: 초기 대비 성능 저하</li>
                    <li><strong>열화 패턴</strong>: 시간에 따른 성능 변화</li>
                    <li><strong>열화 원인</strong>: 쓰기 마모, 컨트롤러 최적화</li>
                </ul>
            </div>
            <div class="contribution-card">
                <h3>3. Device Envelope 모델</h3>
                <ul>
                    <li><strong>4D Grid Interpolation</strong>: 공간적 성능 보간</li>
                    <li><strong>시간 의존성</strong>: 시간에 따른 성능 변화</li>
                    <li><strong>예측 모델</strong>: 미래 성능 예측 가능</li>
                </ul>
            </div>
        </div>

        <h3>예상 성능 열화</h3>
        <ul>
            <li><strong>쓰기 성능</strong>: 15-20% 저하</li>
            <li><strong>읽기 성능</strong>: 5-10% 저하</li>
            <li><strong>지연시간</strong>: 10-15% 증가</li>
            <li><strong>열화 시점</strong>: Phase-B 완료 후</li>
        </ul>

        <h2>📁 출력 파일</h2>
        
        <div class="code-block">
phase-a/
├── data/
│   ├── fio_grid_initial_results.csv      # 초기 상태 fio 결과
│   └── fio_grid_degraded_results.csv     # 열화 상태 fio 결과
├── results/
│   ├── device_envelope_model.json        # Device Envelope 모델
│   └── phase_a_summary_report.json       # 요약 보고서
└── phase_a_YYYYMMDD_HHMMSS.log          # 실행 로그
        </div>

        <h2>⚠️ 주의사항</h2>
        
        <div class="warning-box">
            <h3>실험 순서</h3>
            <ul>
                <li><strong>Phase-A 초기 측정</strong> → <strong>Phase-B 실험</strong> → <strong>Phase-A 열화 측정</strong></li>
                <li>Phase-B 실험을 진행하지 않으면 열화 상태 측정이 불가능</li>
                <li>각 측정은 동일한 조건으로 수행해야 함</li>
            </ul>
        </div>

        <div class="warning-box">
            <h3>데이터 백업</h3>
            <ul>
                <li>초기 측정 결과는 반드시 백업</li>
                <li>열화 측정 전 데이터 손실 방지</li>
                <li>중요한 결과는 별도 저장소에 보관</li>
            </ul>
        </div>

        <div class="warning-box">
            <h3>시스템 요구사항</h3>
            <ul>
                <li>최소 500GB 여유 공간 필요</li>
                <li>sudo 권한 필요 (SSD 초기화용)</li>
                <li>안정적인 전원 공급 필요</li>
            </ul>
        </div>

        <div class="section">
            <div class="section-header">📁 관련 파일 및 링크</div>
            <div class="section-content">
                <div class="link-grid">
                    <a href="../README.html" class="link-card">
                        <h4>📖 실험 개요</h4>
                        <p>전체 실험 개요 및 목표</p>
                    </a>
                    <a href="../ENHANCED_EXPERIMENT_PLAN.html" class="link-card">
                        <h4>🚀 향상된 실험 계획서</h4>
                        <p>상세한 실험 설계 및 계획서</p>
                    </a>
                    <a href="../EXECUTION_GUIDE.html" class="link-card">
                        <h4>📋 실행 가이드</h4>
                        <p>단계별 실험 실행 방법</p>
                    </a>
                    <a href="../phase-b/PHASE_B_PLAN.html" class="link-card">
                        <h4>📊 Phase-B</h4>
                        <p>FillRandom 성능 분석</p>
                    </a>
                    <a href="../scripts/run_phase_a.py" class="link-card">
                        <h4>🔧 Phase-A 실행</h4>
                        <p>Device Envelope 모델 구축 스크립트</p>
                    </a>
                    <a href="../scripts/run_phase_b.py" class="link-card">
                        <h4>📊 Phase-B 실행</h4>
                        <p>FillRandom 성능 분석 스크립트</p>
                    </a>
                </div>
            </div>
        </div>

        <div class="footer">
            <p><strong>Phase-A</strong>: Device Envelope 모델 구축</p>
            <p><strong>예상 소요 시간</strong>: 4-6시간 (초기 측정 2-3시간 + 열화 측정 2-3시간)</p>
            <p><strong>주요 목표</strong>: 초기 상태와 열화 상태 장치 성능 측정으로 Device Envelope 모델 구축</p>
        </div>
    </div>
</body>
</html>
