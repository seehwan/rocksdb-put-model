<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase-A: Device Envelope 모델 구축</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #e74c3c;
            text-align: center;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            border-left: 4px solid #e74c3c;
            padding-left: 15px;
            margin-top: 30px;
        }
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        .hero-box {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }
        .hero-box h2 {
            color: white;
            border: none;
            padding: 0;
            margin: 0 0 20px 0;
            font-size: 2em;
        }
        .experiment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .experiment-card {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #e74c3c;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .experiment-card h4 {
            color: #2c3e50;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #e74c3c;
            color: white;
            font-weight: 600;
            font-size: 1.1em;
        }
        tr:hover {
            background-color: #f8f9fa;
        }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin: 20px 0;
            overflow-x: auto;
        }
        .highlight-box {
            background: #e8f5e8;
            border: 1px solid #27ae60;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .highlight-box h4 {
            color: #27ae60;
            margin-top: 0;
        }
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .warning-box h4 {
            color: #856404;
            margin-top: 0;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 3px solid #e74c3c;
            color: #7f8c8d;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }
        .stat-highlight {
            background: #e74c3c;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        .step-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        .step-box h4 {
            color: #2c3e50;
            margin-top: 0;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
        }
        .process-flow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .flow-step {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            border-top: 4px solid #e74c3c;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .flow-step h4 {
            color: #2c3e50;
            margin-top: 0;
        }
        .flow-step .step-number {
            background: #e74c3c;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔧 Phase-A: Device Envelope 모델 구축</h1>

        <div class="hero-box">
            <h2>🎯 목표</h2>
            <p><strong>초기상태 장치 성능과 Phase-B 이후 열화된 상태에서의 장치 성능을 측정하여 Device Envelope 모델 구축</strong></p>
        </div>

        <h2>📊 실험 설계</h2>
        
        <div class="experiment-grid">
            <div class="experiment-card">
                <h4>1. 초기상태 장치 성능 측정</h4>
                <h5>1.1 SSD 완전 초기화</h5>
                <ul>
                    <li><strong>언마운트</strong>: <code>sudo umount /dev/nvme0n1p1</code></li>
                    <li><strong>블록 디스카드</strong>: <code>sudo blkdiscard /dev/nvme0n1p1</code></li>
                    <li><strong>파일시스템 재생성</strong>: <code>sudo mkfs.f2fs /dev/nvme0n1p1</code></li>
                    <li><strong>마운트</strong>: <code>sudo mount /dev/nvme0n1p1 /rocksdb</code></li>
                </ul>
                <h5>1.2 초기 장치 성능 측정</h5>
                <ul>
                    <li><strong>fio 벤치마크</strong>: 4K 블록 크기, 16개 작업</li>
                    <li><strong>쓰기 성능</strong>: 순차 쓰기, 랜덤 쓰기</li>
                    <li><strong>읽기 성능</strong>: 순차 읽기, 랜덤 읽기</li>
                    <li><strong>지연시간</strong>: 평균, 95%, 99% 지연시간</li>
                </ul>
                <h5>1.3 Device Envelope 기준선 설정</h5>
                <ul>
                    <li><strong>4D Grid Interpolation</strong>: (ρ_r, qd, numjobs, bs_k)</li>
                    <li><strong>364개 측정점</strong>: fio 벤치마크 기반</li>
                    <li><strong>초기 성능 프로파일</strong>: 최적 성능 상태 기록</li>
                </ul>
            </div>
            <div class="experiment-card">
                <h4>2. Phase-B 이후 열화상태 장치 성능 측정</h4>
                <h5>2.1 Phase-B 완료 후 측정</h5>
                <ul>
                    <li><strong>Phase-B 실험 완료 대기</strong>: FillRandom 실험 완료 후</li>
                    <li><strong>동일한 fio 벤치마크</strong>: 초기 측정과 동일한 조건</li>
                    <li><strong>열화된 성능 프로파일</strong>: 사용 후 성능 상태 기록</li>
                </ul>
                <h5>2.2 성능 열화 분석</h5>
                <ul>
                    <li><strong>성능 저하율</strong>: 초기 대비 성능 저하 비율</li>
                    <li><strong>열화 패턴</strong>: 시간에 따른 성능 변화 패턴</li>
                    <li><strong>열화 원인</strong>: 쓰기 마모, 컨트롤러 최적화 등</li>
                </ul>
            </div>
            <div class="experiment-card">
                <h4>3. Device Envelope 모델 구축</h4>
                <h5>3.1 시간 의존적 성능 모델</h5>
                <ul>
                    <li><strong>초기 성능</strong>: 최고 성능 상태 모델</li>
                    <li><strong>열화 성능</strong>: 사용 후 성능 상태 모델</li>
                    <li><strong>시간 의존성</strong>: 실험 진행에 따른 성능 변화 모델</li>
                </ul>
                <h5>3.2 4D Grid Interpolation 확장</h5>
                <ul>
                    <li><strong>시간 차원 추가</strong>: 5D Grid Interpolation (시간 포함)</li>
                    <li><strong>동적 보간</strong>: 시간에 따른 성능 변화 보간</li>
                    <li><strong>예측 모델</strong>: 미래 성능 예측 가능</li>
                </ul>
            </div>
        </div>

        <h2>🔧 실험 환경</h2>
        
        <h3>하드웨어</h3>
        <table>
            <thead>
                <tr>
                    <th>구성 요소</th>
                    <th>사양</th>
                    <th>비고</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>CPU</td>
                    <td>Intel i9-12900K (16 cores, 24 threads)</td>
                    <td>고성능 멀티코어</td>
                </tr>
                <tr>
                    <td>Memory</td>
                    <td>64GB DDR4-3200</td>
                    <td>대용량 메모리</td>
                </tr>
                <tr>
                    <td>Storage</td>
                    <td>Samsung 980 PRO 2TB NVMe SSD</td>
                    <td>고성능 NVMe</td>
                </tr>
                <tr>
                    <td>OS</td>
                    <td>Ubuntu 22.04 LTS</td>
                    <td>안정적 리눅스</td>
                </tr>
            </tbody>
        </table>

        <h3>소프트웨어</h3>
        <ul>
            <li><strong>fio</strong>: Flexible I/O Tester (버전 3.28+)</li>
            <li><strong>Python</strong>: 3.8+ (numpy, pandas, scipy)</li>
            <li><strong>기타</strong>: 시스템 모니터링 도구</li>
        </ul>

        <h2>📋 실험 절차</h2>
        
        <div class="process-flow">
            <div class="flow-step">
                <div class="step-number">1</div>
                <h4>SSD 초기화</h4>
                <p>완전한 SSD 초기화</p>
            </div>
            <div class="flow-step">
                <div class="step-number">2</div>
                <h4>초기 성능 측정</h4>
                <p>fio 그리드 벤치마크</p>
            </div>
            <div class="flow-step">
                <div class="step-number">3</div>
                <h4>Phase-B 대기</h4>
                <p>FillRandom 실험 진행</p>
            </div>
            <div class="flow-step">
                <div class="step-number">4</div>
                <h4>열화 성능 측정</h4>
                <p>동일한 fio 벤치마크</p>
            </div>
            <div class="flow-step">
                <div class="step-number">5</div>
                <h4>모델 구축</h4>
                <p>Device Envelope 모델</p>
            </div>
        </div>

        <h3>상세 절차</h3>
        
        <div class="step-box">
            <h4>1. SSD 완전 초기화</h4>
            <div class="code-block">
# 1. 언마운트
sudo umount /dev/nvme0n1p1

# 2. 블록 디스카드 (완전 초기화)
sudo blkdiscard /dev/nvme0n1p1

# 3. 파일시스템 재생성
sudo mkfs.f2fs /dev/nvme0n1p1

# 4. 마운트
sudo mount /dev/nvme0n1p1 /rocksdb

# 5. 권한 설정
sudo chown -R $USER:$USER /rocksdb
            </div>
        </div>

        <div class="step-box">
            <h4>2. 초기 상태 fio 벤치마크</h4>
            <div class="code-block">
# fio 그리드 벤치마크 실행
python3 scripts/run_phase_a.py

# 측정 파라미터:
# - 블록 크기: 4K, 8K, 16K, 32K, 64K, 128K, 256K, 512K, 1M
# - 큐 깊이: 1, 2, 4, 8, 16, 32, 64
# - 작업 수: 1, 2, 4, 8, 16
# - 읽기/쓰기 비율: 0.0, 0.25, 0.5, 0.75, 1.0
            </div>
        </div>

        <div class="step-box">
            <h4>3. Phase-B 실험 진행</h4>
            <div class="code-block">
# Phase-B FillRandom 실험 실행
python3 scripts/run_phase_b.py

# 실험 내용:
# - Uniform Random 분포 FillRandom
# - Zipfian Random 분포 FillRandom
# - 상세한 로그 수집
# - 성능 모니터링
            </div>
        </div>

        <div class="step-box">
            <h4>4. 열화 상태 fio 벤치마크</h4>
            <div class="code-block">
# Phase-B 완료 후 동일한 fio 벤치마크 실행
python3 scripts/run_phase_a.py

# 초기 측정과 동일한 조건으로 재측정
# - 동일한 측정점 (364개)
# - 동일한 테스트 시간 (5분 + 1분 워밍업)
# - 열화된 성능 프로파일 기록
            </div>
        </div>

        <div class="step-box">
            <h4>5. Device Envelope 모델 구축</h4>
            <div class="code-block">
# 4D Grid Interpolation 모델 생성
# - 초기 상태 성능 그리드
# - 열화 상태 성능 그리드
# - 시간 의존적 보간 모델

# 열화 분석
# - 성능 저하율 계산
# - 열화 패턴 분석
# - 예측 모델 구축
            </div>
        </div>

        <h2>📊 측정 파라미터</h2>
        
        <h3>fio 벤치마크 설정</h3>
        <table>
            <thead>
                <tr>
                    <th>파라미터</th>
                    <th>값</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>블록 크기</td>
                    <td>4K, 8K, 16K, 32K, 64K, 128K, 256K, 512K, 1M</td>
                    <td>9개 크기</td>
                </tr>
                <tr>
                    <td>큐 깊이</td>
                    <td>1, 2, 4, 8, 16, 32, 64</td>
                    <td>7개 깊이</td>
                </tr>
                <tr>
                    <td>작업 수</td>
                    <td>1, 2, 4, 8, 16</td>
                    <td>5개 작업</td>
                </tr>
                <tr>
                    <td>읽기/쓰기 비율</td>
                    <td>0.0, 0.25, 0.5, 0.75, 1.0</td>
                    <td>5개 비율</td>
                </tr>
                <tr>
                    <td>총 측정점</td>
                    <td>364개</td>
                    <td>9×7×5×5 = 1575개 중 중복 제거</td>
                </tr>
                <tr>
                    <td>테스트 시간</td>
                    <td>5분 + 1분 워밍업</td>
                    <td>각 측정점당</td>
                </tr>
            </tbody>
        </table>

        <h2>📈 예상 결과</h2>
        
        <div class="experiment-grid">
            <div class="experiment-card">
                <h4>1. 초기 상태 성능</h4>
                <ul>
                    <li><strong>최고 성능</strong>: 초기화 직후 최적 성능</li>
                    <li><strong>성능 프로파일</strong>: 4D 그리드 기반 성능 맵</li>
                    <li><strong>기준선</strong>: 모든 후속 측정의 기준</li>
                </ul>
            </div>
            <div class="experiment-card">
                <h4>2. 열화 상태 성능</h4>
                <ul>
                    <li><strong>성능 저하</strong>: 초기 대비 성능 저하</li>
                    <li><strong>열화 패턴</strong>: 시간에 따른 성능 변화</li>
                    <li><strong>열화 원인</strong>: 쓰기 마모, 컨트롤러 최적화</li>
                </ul>
            </div>
            <div class="experiment-card">
                <h4>3. Device Envelope 모델</h4>
                <ul>
                    <li><strong>4D Grid Interpolation</strong>: 공간적 성능 보간</li>
                    <li><strong>시간 의존성</strong>: 시간에 따른 성능 변화</li>
                    <li><strong>예측 모델</strong>: 미래 성능 예측 가능</li>
                </ul>
            </div>
        </div>

        <h3>예상 성능 열화</h3>
        <ul>
            <li><strong>쓰기 성능</strong>: 15-20% 저하</li>
            <li><strong>읽기 성능</strong>: 5-10% 저하</li>
            <li><strong>지연시간</strong>: 10-15% 증가</li>
            <li><strong>열화 시점</strong>: Phase-B 완료 후</li>
        </ul>

        <h2>📁 출력 파일</h2>
        
        <div class="code-block">
phase-a/
├── data/
│   ├── fio_grid_initial_results.csv      # 초기 상태 fio 결과
│   └── fio_grid_degraded_results.csv     # 열화 상태 fio 결과
├── results/
│   ├── device_envelope_model.json        # Device Envelope 모델
│   └── phase_a_summary_report.json       # 요약 보고서
└── phase_a_YYYYMMDD_HHMMSS.log          # 실행 로그
        </div>

        <h2>⚠️ 주의사항</h2>
        
        <div class="warning-box">
            <h4>실험 순서</h4>
            <ul>
                <li><strong>Phase-A 초기 측정</strong> → <strong>Phase-B 실험</strong> → <strong>Phase-A 열화 측정</strong></li>
                <li>Phase-B 실험을 진행하지 않으면 열화 상태 측정이 불가능</li>
                <li>각 측정은 동일한 조건으로 수행해야 함</li>
            </ul>
        </div>

        <div class="warning-box">
            <h4>데이터 백업</h4>
            <ul>
                <li>초기 측정 결과는 반드시 백업</li>
                <li>열화 측정 전 데이터 손실 방지</li>
                <li>중요한 결과는 별도 저장소에 보관</li>
            </ul>
        </div>

        <div class="warning-box">
            <h4>시스템 요구사항</h4>
            <ul>
                <li>최소 500GB 여유 공간 필요</li>
                <li>sudo 권한 필요 (SSD 초기화용)</li>
                <li>안정적인 전원 공급 필요</li>
            </ul>
        </div>

        <div class="footer">
            <p><strong>Phase-A</strong>: Device Envelope 모델 구축</p>
            <p><strong>예상 소요 시간</strong>: 4-6시간 (초기 측정 2-3시간 + 열화 측정 2-3시간)</p>
            <p><strong>주요 목표</strong>: 초기 상태와 열화 상태 장치 성능 측정으로 Device Envelope 모델 구축</p>
        </div>
    </div>
</body>
</html>
