<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase-B: RocksDB FillRandom 실험 계획</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        
        .goal-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .goal-box h2 {
            color: white;
            border: none;
            padding: 0;
            margin: 0 0 15px 0;
        }
        
        .goal-list {
            list-style: none;
            padding: 0;
        }
        
        .goal-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .goal-list li:before {
            content: "🎯 ";
            margin-right: 10px;
        }
        
        .procedure-box {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #27ae60;
        }
        
        .procedure-step {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #27ae60;
        }
        
        .procedure-step h4 {
            color: #27ae60;
            margin: 0 0 10px 0;
        }
        
        code {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            display: block;
            margin: 10px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
        
        .code-inline {
            background: #e74c3c;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        .expected-results {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .expected-results h2 {
            color: white;
            border: none;
            padding: 0;
            margin: 0 0 15px 0;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .result-card {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        
        .result-card h4 {
            margin: 0 0 10px 0;
            font-size: 1.1em;
        }
        
        .output-files {
            background: #34495e;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .output-files h2 {
            color: white;
            border: none;
            padding: 0;
            margin: 0 0 15px 0;
        }
        
        .file-list {
            list-style: none;
            padding: 0;
        }
        
        .file-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            font-family: 'Courier New', monospace;
        }
        
        .file-list li:before {
            content: "📄 ";
            margin-right: 10px;
        }
        
        .warning-box {
            background: #f39c12;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #e67e22;
        }
        
        .warning-box:before {
            content: "⚠️ ";
            font-size: 1.2em;
        }
        
        .success-box {
            background: #27ae60;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #229954;
        }
        
        .success-box:before {
            content: "✅ ";
            font-size: 1.2em;
        }
        
        .analysis-features {
            background: #9b59b6;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .analysis-features h2 {
            color: white;
            border: none;
            padding: 0;
            margin: 0 0 15px 0;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        
        .feature-item h4 {
            margin: 0 0 10px 0;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            background: #2c3e50;
            color: white;
            border-radius: 8px;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 20px;
            }
            
            .results-grid, .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Phase-B: RocksDB FillRandom 실험 계획</h1>
        
        <div class="goal-box">
            <h2>🎯 실험 목표</h2>
            <ul class="goal-list">
                <li><strong>FillRandom 워크로드 실행</strong>: 시간별 성능 변화 측정</li>
                <li><strong>LOG 파일 수집</strong>: 상세한 RocksDB 내부 동작 로그</li>
                <li><strong>Compaction 분석</strong>: 시간별 Compaction 패턴 및 성능 영향</li>
                <li><strong>안정화 여부 확인</strong>: RocksDB가 안정적인 Put 속도에 도달하는지 검증</li>
            </ul>
        </div>

        <h2>📋 실험 절차</h2>
        
        <div class="procedure-box">
            <h3>1. 장치 파티셔닝 및 마운트</h3>
            
            <div class="procedure-step">
                <h4>기존 파티션 정리</h4>
                <code># 기존 파티션 언마운트
sudo umount /dev/nvme1n1p1 2>/dev/null || true
sudo umount /dev/nvme1n1p2 2>/dev/null || true
sudo umount /dev/nvme1n1 2>/dev/null || true</code>
            </div>
            
            <div class="procedure-step">
                <h4>파티션 테이블 생성</h4>
                <code># GPT 파티션 테이블 생성
sudo parted /dev/nvme1n1 mklabel gpt

# WAL 파티션 생성 (1MB-10GB)
sudo parted /dev/nvme1n1 mkpart primary 1MB 10GB

# Data 파티션 생성 (10GB-100%)
sudo parted /dev/nvme1n1 mkpart primary 10GB 100%</code>
            </div>
            
            <div class="procedure-step">
                <h4>파일시스템 생성</h4>
                <code># WAL용 F2FS 파일시스템
sudo mkfs.f2fs /dev/nvme1n1p1

# Data용 F2FS 파일시스템
sudo mkfs.f2fs /dev/nvme1n1p2</code>
            </div>
            
            <div class="procedure-step">
                <h4>마운트 및 권한 설정</h4>
                <code># 마운트 포인트 생성
sudo mkdir -p /rocksdb/wal /rocksdb/data

# 파티션 마운트
sudo mount /dev/nvme1n1p1 /rocksdb/wal
sudo mount /dev/nvme1n1p2 /rocksdb/data

# 권한 설정
sudo chown -R sslab:sslab /rocksdb</code>
            </div>
        </div>

        <div class="procedure-box">
            <h3>2. RocksDB 설정 및 FillRandom 실행</h3>
            
            <div class="procedure-step">
                <h4>FillRandom 워크로드 실행</h4>
                <code>./db_bench --benchmarks=fillrandom \
  --db=/rocksdb/data \
  --wal_dir=/rocksdb/wal \
  --num=1000000000 \
  --value_size=1024 \
  --key_size=16 \
  --threads=16 \
  --stats_interval=1000000 \
  --stats_dump_period_sec=10 \
  --log_file=/rocksdb/data/LOG \
  --log_level=INFO \
  --max_log_file_size=1073741824 \
  --keep_log_file_num=10</code>
            </div>
            
            <div class="procedure-step">
                <h4>워크로드 파라미터</h4>
                <ul>
                    <li><strong>레코드 수</strong>: 10억 개 (1,000,000,000)</li>
                    <li><strong>Value 크기</strong>: 1KB (1024 bytes)</li>
                    <li><strong>Key 크기</strong>: 16 bytes</li>
                    <li><strong>스레드 수</strong>: 16개</li>
                    <li><strong>총 데이터 크기</strong>: ~1TB</li>
                </ul>
            </div>
        </div>

        <div class="procedure-box">
            <h3>3. 모니터링 및 데이터 수집</h3>
            
            <div class="procedure-step">
                <h4>수집 데이터</h4>
                <ul>
                    <li><strong>성능 지표</strong>: 초당 Put 수, 처리량, 지연시간</li>
                    <li><strong>LOG 분석</strong>: Compaction 이벤트, 메모리 사용량, 레벨별 상태</li>
                    <li><strong>시간별 변화</strong>: 안정화 구간, 성능 저하 구간 식별</li>
                </ul>
            </div>
        </div>

        <div class="expected-results">
            <h2>📊 예상 결과</h2>
            
            <div class="results-grid">
                <div class="result-card">
                    <h4>초기 성능</h4>
                    <p>높은 Put 속도<br>(초기 상태)</p>
                </div>
                
                <div class="result-card">
                    <h4>성능 저하</h4>
                    <p>Compaction 시작 후<br>성능 감소</p>
                </div>
                
                <div class="result-card">
                    <h4>안정화</h4>
                    <p>일정 시간 후<br>안정적인 성능 구간</p>
                </div>
                
                <div class="result-card">
                    <h4>최종 성능</h4>
                    <p>장기간 안정화된<br>Put 속도</p>
                </div>
            </div>
        </div>

        <div class="analysis-features">
            <h2>🔍 분석 기능</h2>
            
            <div class="feature-grid">
                <div class="feature-item">
                    <h4>📈 성능 트렌드</h4>
                    <p>시간별 Put Rate 변화 분석</p>
                </div>
                
                <div class="feature-item">
                    <h4>🔄 Compaction 패턴</h4>
                    <p>레벨별 Compaction 빈도 분석</p>
                </div>
                
                <div class="feature-item">
                    <h4>📊 안정화 검증</h4>
                    <p>변동계수를 통한 안정성 측정</p>
                </div>
                
                <div class="feature-item">
                    <h4>📉 성능 저하 구간</h4>
                    <p>성능 저하 시점 및 원인 분석</p>
                </div>
                
                <div class="feature-item">
                    <h4>📋 종합 보고서</h4>
                    <p>JSON 형태의 상세 분석 결과</p>
                </div>
                
                <div class="feature-item">
                    <h4>📊 시각화</h4>
                    <p>성능 변화 그래프 및 차트</p>
                </div>
            </div>
        </div>

        <div class="output-files">
            <h2>📁 출력 파일</h2>
            
            <ul class="file-list">
                <li><strong>LOG</strong>: RocksDB 상세 로그</li>
                <li><strong>fillrandom_results.json</strong>: 성능 측정 결과</li>
                <li><strong>compaction_analysis.json</strong>: Compaction 패턴 분석</li>
                <li><strong>phase_b_analysis.png</strong>: 시간별 성능 변화 시각화</li>
                <li><strong>phase_b_summary.json</strong>: 종합 요약 보고서</li>
                <li><strong>phase_b.log</strong>: 실험 실행 로그</li>
            </ul>
        </div>

        <div class="warning-box">
            <strong>주의사항</strong>: 이 실험은 장시간 (몇 시간) 소요되며 대용량 데이터를 생성합니다. 
            충분한 디스크 공간과 시간을 확보한 후 실행하세요.
        </div>

        <div class="success-box">
            <strong>실행 방법</strong>: <code class="code-inline">./run_phase_b.sh</code> 명령어로 자동화된 실험을 실행할 수 있습니다.
        </div>

        <div class="footer">
            <p><strong>Phase-B: RocksDB FillRandom 실험</strong></p>
            <p>정교한 Device Envelope 모델을 위한 시간별 성능 분석</p>
            <p>생성일: 2025-09-12</p>
        </div>
    </div>
</body>
</html>